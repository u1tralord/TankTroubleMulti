{"filter":false,"title":"server.js","tooltip":"/server.js","undoManager":{"mark":58,"position":58,"stack":[[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":0,"column":33},"action":"insert","lines":["var io = socketio.listen(server);"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":1,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":0},"end":{"row":2,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":0},"end":{"row":2,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":0,"column":36},"action":"insert","lines":["var socketio = require('socket.io');"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":36},"end":{"row":1,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":0},"end":{"row":1,"column":39},"action":"insert","lines":["var server = http.createServer(router);"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":39},"end":{"row":2,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":36},"end":{"row":1,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":0},"end":{"row":1,"column":27},"action":"insert","lines":["var http = require('http');"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":27},"end":{"row":2,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":0},"end":{"row":3,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":3,"column":0},"end":{"row":3,"column":23},"action":"insert","lines":["var router = express();"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":0},"end":{"row":2,"column":33},"action":"insert","lines":["var express = require('express');"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":33},"end":{"row":3,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":7,"column":33},"end":{"row":8,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":0},"end":{"row":9,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":0},"end":{"row":10,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":0},"end":{"row":11,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":0},"end":{"row":11,"column":30},"action":"insert","lines":["console.log(\"Server started\");"]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":0},"end":{"row":9,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":0},"end":{"row":30,"column":3},"action":"insert","lines":["io.sockets.on('connection', function (socket) {","    ","  var tank = getNewTank(config.startPos.x, config.startPos.y, config.startPos.dir, socket);","  socket.emit('connected', { tank: tank });","  tanks.push(tank);","","  socket.on('move_tank', function (data) {","        tank.xPos = data.xPos;","        tank.yPos = data.yPos;","        tank.dir = data.dir;","  });","  ","  socket.on('shoot', function (data) {","        tank.shoot();","  });","  ","  ","  socket.on('disconnect', function() {","      tanks.splice(tanks.indexOf(tank),1);//remove that tank from the world","      console.log('Got disconnect!');","   });","});"]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":0},"end":{"row":23,"column":5},"action":"remove","lines":["  var tank = getNewTank(config.startPos.x, config.startPos.y, config.startPos.dir, socket);","  socket.emit('connected', { tank: tank });","  tanks.push(tank);","","  socket.on('move_tank', function (data) {","        tank.xPos = data.xPos;","        tank.yPos = data.yPos;","        tank.dir = data.dir;","  });","  ","  socket.on('shoot', function (data) {","        tank.shoot();","  });"]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":4},"end":{"row":11,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":0},"end":{"row":10,"column":4},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":47},"end":{"row":10,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":1},"end":{"row":11,"column":2},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":0},"end":{"row":11,"column":1},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":2},"end":{"row":11,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":1},"end":{"row":10,"column":2},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":0},"end":{"row":10,"column":1},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":47},"end":{"row":10,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":47},"end":{"row":10,"column":0},"action":"insert","lines":["",""]},{"start":{"row":10,"column":0},"end":{"row":10,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":4},"end":{"row":11,"column":0},"action":"insert","lines":["",""]},{"start":{"row":11,"column":0},"end":{"row":11,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":12,"column":38},"end":{"row":13,"column":75},"action":"remove","lines":["","      tanks.splice(tanks.indexOf(tank),1);//remove that tank from the world"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":0},"end":{"row":17,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":0},"end":{"row":17,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":3},"end":{"row":16,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":30},"end":{"row":18,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":0},"end":{"row":19,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":19,"column":0},"end":{"row":39,"column":1},"action":"insert","lines":["setInterval(function() {","    update();","}, 1000 / config.updateRate);","","function update(){","    tanks.forEach(function(tank) {","        tank.bullets = tank.bullets.filter(function(bullet) {","                return bullet.active;","        });","        ","        tank.bullets.forEach(function(bullet){","            bullet.update();","            ","           //console.log(bullet.distanceTraveled);","        });","        ","        ","        ","        tank.socket.emit('tanks', tanks);","    });","}"]}]}],[{"group":"doc","deltas":[{"start":{"row":24,"column":0},"end":{"row":37,"column":41},"action":"remove","lines":["    tanks.forEach(function(tank) {","        tank.bullets = tank.bullets.filter(function(bullet) {","                return bullet.active;","        });","        ","        tank.bullets.forEach(function(bullet){","            bullet.update();","            ","           //console.log(bullet.distanceTraveled);","        });","        ","        ","        ","        tank.socket.emit('tanks', tanks);"]}]}],[{"group":"doc","deltas":[{"start":{"row":24,"column":0},"end":{"row":25,"column":7},"action":"remove","lines":["","    });"]}]}],[{"group":"doc","deltas":[{"start":{"row":3,"column":0},"end":{"row":3,"column":23},"action":"insert","lines":["var fs = require('fs');"]}]}],[{"group":"doc","deltas":[{"start":{"row":3,"column":23},"end":{"row":4,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":7,"column":0},"end":{"row":8,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":0},"end":{"row":8,"column":64},"action":"insert","lines":["var config = JSON.parse(fs.readFileSync('config.json', 'utf8'));"]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":64},"end":{"row":9,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":1},"end":{"row":29,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":29,"column":0},"end":{"row":30,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":30,"column":0},"end":{"row":33,"column":3},"action":"insert","lines":["server.listen(process.env.PORT || 3000, process.env.IP || \"0.0.0.0\", function(){","  var addr = server.address();","  console.log(\"Chat server listening at\", addr.address + \":\" + addr.port);","});"]}]}],[{"group":"doc","deltas":[{"start":{"row":5,"column":23},"end":{"row":6,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":6,"column":0},"end":{"row":6,"column":62},"action":"insert","lines":["router.use(express.static(path.resolve(__dirname, 'client')));"]}]}],[{"group":"doc","deltas":[{"start":{"row":3,"column":23},"end":{"row":4,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":0},"end":{"row":4,"column":27},"action":"insert","lines":["var path = require('path');"]}]}],[{"group":"doc","deltas":[{"start":{"row":24,"column":0},"end":{"row":24,"column":1},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":24,"column":1},"end":{"row":24,"column":2},"action":"insert","lines":["*"]}]}],[{"group":"doc","deltas":[{"start":{"row":30,"column":1},"end":{"row":30,"column":2},"action":"insert","lines":["*"]}]}],[{"group":"doc","deltas":[{"start":{"row":30,"column":2},"end":{"row":30,"column":3},"action":"insert","lines":["/"]}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":7,"column":39},"end":{"row":7,"column":48},"isBackwards":true},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1427420701374,"hash":"2cb2e2f840f2a0cbac423aa50ff51e7821bb7ef0"}